{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Metadata": {
        "AWS::CloudFormation::Designer": {
            "56b56db1-d440-427e-a938-0aad913098e5": {
                "size": {
                    "width": 470,
                    "height": 420
                },
                "position": {
                    "x": 260,
                    "y": 360
                },
                "z": 1,
                "embeds": [
                    "7d306aac-b0af-4244-b3b7-6fc66c2738bd",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "e4319681-b2ff-48c2-996b-0864e18195ea"
                ]
            },
            "b575da53-bc6c-47f8-86e5-5ff33140e77c": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 410,
                    "y": 660
                },
                "z": 3,
                "parent": "720de671-0940-4aff-ac9d-fcf2ba568028",
                "embeds": [],
                "isassociatedwith": [
                    "c0af4cf8-0bcf-4ae8-80d6-260970235924"
                ],
                "iscontainedinside": [
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028"
                ],
                "dependson": [
                    "f6cca011-35f5-41e9-926b-fc7802624724"
                ]
            },
            "086f1a74-01d8-4651-8185-d339bbc8eec7": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 310,
                    "y": 660
                },
                "z": 3,
                "parent": "720de671-0940-4aff-ac9d-fcf2ba568028",
                "embeds": [],
                "isassociatedwith": [
                    "74716bfb-54f1-4a82-961f-da81070de283"
                ],
                "iscontainedinside": [
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028",
                    "720de671-0940-4aff-ac9d-fcf2ba568028"
                ]
            },
            "7d306aac-b0af-4244-b3b7-6fc66c2738bd": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 360,
                    "y": 390
                },
                "z": 2,
                "parent": "56b56db1-d440-427e-a938-0aad913098e5",
                "embeds": [],
                "dependson": [
                    "c0af4cf8-0bcf-4ae8-80d6-260970235924",
                    "74716bfb-54f1-4a82-961f-da81070de283"
                ]
            },
            "112b087e-6a2a-481a-96a6-337d1d82afa5": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 360,
                    "y": 810
                },
                "z": 1,
                "embeds": [],
                "dependson": [
                    "b575da53-bc6c-47f8-86e5-5ff33140e77c",
                    "086f1a74-01d8-4651-8185-d339bbc8eec7"
                ]
            },
            "c0af4cf8-0bcf-4ae8-80d6-260970235924": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 410,
                    "y": 530
                },
                "z": 3,
                "parent": "720de671-0940-4aff-ac9d-fcf2ba568028",
                "embeds": [],
                "iscontainedinside": [
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5"
                ]
            },
            "74716bfb-54f1-4a82-961f-da81070de283": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 310,
                    "y": 530
                },
                "z": 3,
                "parent": "720de671-0940-4aff-ac9d-fcf2ba568028",
                "embeds": [],
                "iscontainedinside": [
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5"
                ]
            },
            "4c6bbf9e-ad12-4654-8405-dd45fe24f096": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 750,
                    "y": 660
                },
                "z": 0,
                "embeds": []
            },
            "e4319681-b2ff-48c2-996b-0864e18195ea": {
                "size": {
                    "width": 100,
                    "height": 110
                },
                "position": {
                    "x": 610,
                    "y": 630
                },
                "z": 2,
                "parent": "56b56db1-d440-427e-a938-0aad913098e5",
                "embeds": [
                    "f6cca011-35f5-41e9-926b-fc7802624724"
                ],
                "iscontainedinside": [
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5"
                ],
                "dependson": [
                    "720de671-0940-4aff-ac9d-fcf2ba568028"
                ]
            },
            "f6cca011-35f5-41e9-926b-fc7802624724": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 630,
                    "y": 660
                },
                "z": 3,
                "parent": "e4319681-b2ff-48c2-996b-0864e18195ea",
                "embeds": [],
                "iscontainedinside": [
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea",
                    "e4319681-b2ff-48c2-996b-0864e18195ea"
                ],
                "dependson": [
                    "4c6bbf9e-ad12-4654-8405-dd45fe24f096"
                ]
            },
            "2edee4b3-b27f-4640-a683-0cee25ccfe30": {
                "source": {
                    "id": "56b56db1-d440-427e-a938-0aad913098e5"
                },
                "target": {
                    "id": "4c6bbf9e-ad12-4654-8405-dd45fe24f096"
                },
                "z": 1
            },
            "720de671-0940-4aff-ac9d-fcf2ba568028": {
                "size": {
                    "width": 290,
                    "height": 270
                },
                "position": {
                    "x": 280,
                    "y": 490
                },
                "z": 2,
                "parent": "56b56db1-d440-427e-a938-0aad913098e5",
                "embeds": [
                    "c0af4cf8-0bcf-4ae8-80d6-260970235924",
                    "74716bfb-54f1-4a82-961f-da81070de283",
                    "086f1a74-01d8-4651-8185-d339bbc8eec7",
                    "b575da53-bc6c-47f8-86e5-5ff33140e77c",
                    "4f315d43-a580-4f39-b71b-17023d835537"
                ],
                "iscontainedinside": [
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5",
                    "56b56db1-d440-427e-a938-0aad913098e5"
                ]
            },
            "3e5a7ba1-05a3-4e09-a43c-6f0375985bf9": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 160,
                    "y": 530
                },
                "z": 0,
                "embeds": [],
                "dependson": [
                    "74716bfb-54f1-4a82-961f-da81070de283"
                ]
            },
            "7153aca6-c765-4981-b361-8e88629323d5": {
                "source": {
                    "id": "3e5a7ba1-05a3-4e09-a43c-6f0375985bf9"
                },
                "target": {
                    "id": "74716bfb-54f1-4a82-961f-da81070de283"
                },
                "z": 4
            },
            "4f315d43-a580-4f39-b71b-17023d835537": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 490,
                    "y": 570
                },
                "z": 3,
                "parent": "720de671-0940-4aff-ac9d-fcf2ba568028",
                "embeds": [],
                "dependson": [
                    "b575da53-bc6c-47f8-86e5-5ff33140e77c"
                ]
            },
            "473372de-4469-4b30-b376-a282cef26a95": {
                "source": {
                    "id": "4f315d43-a580-4f39-b71b-17023d835537"
                },
                "target": {
                    "id": "b575da53-bc6c-47f8-86e5-5ff33140e77c"
                },
                "z": 4
            }
        }
    },
    "Resources": {
        "BettingVPC": {
            "Type": "AWS::EC2::VPC",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "56b56db1-d440-427e-a938-0aad913098e5"
                }
            }
        },
        "PublicInternetGateway": {
            "Type": "AWS::EC2::InternetGateway",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "4c6bbf9e-ad12-4654-8405-dd45fe24f096"
                }
            }
        },
        "RouteTable": {
            "Type": "AWS::EC2::RouteTable",
            "Properties": {
                "VpcId": {
                    "Ref": "BettingVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "e4319681-b2ff-48c2-996b-0864e18195ea"
                }
            },
            "DependsOn": [
                "PublicSubnet"
            ]
        },
        "EC2VPCG3QBJX": {
            "Type": "AWS::EC2::VPCGatewayAttachment",
            "Properties": {
                "InternetGatewayId": {
                    "Ref": "PublicInternetGateway"
                },
                "VpcId": {
                    "Ref": "BettingVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "2edee4b3-b27f-4640-a683-0cee25ccfe30"
                }
            }
        },
        "PublicSubnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": {
                    "Ref": "BettingVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "720de671-0940-4aff-ac9d-fcf2ba568028"
                }
            }
        },
        "ProducerSG": {
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": {
                "VpcId": {
                    "Ref": "BettingVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "74716bfb-54f1-4a82-961f-da81070de283"
                }
            }
        },
        "ConsumerSG": {
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": {
                "VpcId": {
                    "Ref": "BettingVPC"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "c0af4cf8-0bcf-4ae8-80d6-260970235924"
                }
            }
        },
        "Producer": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "SecurityGroupIds": [
                    {
                        "Ref": "ProducerSG"
                    }
                ],
                "NetworkInterfaces": [
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    }
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "086f1a74-01d8-4651-8185-d339bbc8eec7"
                }
            }
        },
        "Consumer": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "SecurityGroupIds": [
                    {
                        "Ref": "ConsumerSG"
                    }
                ],
                "NetworkInterfaces": [
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    },
                    {
                        "SubnetId": {
                            "Ref": "PublicSubnet"
                        }
                    }
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "b575da53-bc6c-47f8-86e5-5ff33140e77c"
                }
            },
            "DependsOn": [
                "BrokerVPN"
            ]
        },
        "TriggerQueue": {
            "Type": "AWS::SQS::Queue",
            "Properties": {
                "FifoQueue": "true",
                "ContentBasedDeduplication": "true",
                "DelaySeconds": 30
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "7d306aac-b0af-4244-b3b7-6fc66c2738bd"
                }
            },
            "DependsOn": [
                "ConsumerSG",
                "ProducerSG"
            ]
        },
        "Bets": {
            "Type": "AWS::S3::Bucket",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "112b087e-6a2a-481a-96a6-337d1d82afa5"
                }
            },
            "DependsOn": [
                "Consumer",
                "Producer"
            ]
        },
        "HorseData": {
            "Type": "AWS::S3::Bucket",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "3e5a7ba1-05a3-4e09-a43c-6f0375985bf9"
                }
            },
            "DependsOn": [
                "ProducerSG"
            ]
        },
        "BetLogs": {
            "Type": "AWS::RDS::DBInstance",
            "Properties": {},
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "4f315d43-a580-4f39-b71b-17023d835537"
                }
            },
            "DependsOn": [
                "Consumer"
            ]
        },
        "BrokerVPN": {
            "Type": "AWS::EC2::Route",
            "Properties": {
                "RouteTableId": {
                    "Ref": "RouteTable"
                },
                "GatewayId": {
                    "Ref": "PublicInternetGateway"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "f6cca011-35f5-41e9-926b-fc7802624724"
                }
            },
            "DependsOn": [
                "PublicInternetGateway"
            ]
        }
    }
}